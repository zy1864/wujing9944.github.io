{"version":3,"file":"js/35.bf054f69.js","mappings":"mJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,YAAY,UAAUC,MAAM,CAAC,MAAQ,OAAO,aAAa,IAAIC,GAAG,CAAC,aAAaN,EAAIO,eAAeL,EAAG,WAAW,CAACE,YAAY,WAAWC,MAAM,CAAC,gBAAgB,UAAUL,EAAIQ,GAAIR,EAAIS,MAAM,SAASC,EAAIC,GAAO,OAAOT,EAAG,iBAAiB,CAACU,IAAID,EAAME,YAAYb,EAAIc,GAAG,CAAC,CAACF,IAAI,QAAQG,GAAG,WAAW,MAAO,CAACb,EAAG,aAAa,CAACE,YAAY,gBAAgBC,MAAM,CAAC,OAAS,GAAG,KAAO,KAAK,KAAO,UAAUC,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOhB,EAAIiB,SAASP,EAAIQ,MAAMP,EAAM,KAAK,EAAEQ,OAAM,IAAO,MAAK,IAAO,CAACjB,EAAG,MAAM,CAACE,YAAY,YAAYE,GAAG,CAAC,MAAQ,SAASU,GAAQ,OAAOhB,EAAIoB,eAAeV,EAAIQ,MAAM,IAAI,CAAChB,EAAG,MAAM,CAACmB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOd,EAAIe,MAAOC,WAAW,cAActB,YAAY,qBAAqBF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,IAAI,CAACE,YAAY,cAAc,CAACJ,EAAI2B,GAAG3B,EAAI4B,GAAGlB,EAAImB,YAAY3B,EAAG,IAAI,CAACE,YAAY,cAAc,CAACJ,EAAI2B,GAAG3B,EAAI4B,GAAGlB,EAAIoB,SAAS5B,EAAG,IAAI,CAACE,YAAY,kBAAkB,CAACJ,EAAI2B,GAAG3B,EAAI4B,GAAGlB,EAAIqB,aAAa7B,EAAG,IAAI,CAACE,YAAY,eAAe,CAACJ,EAAI2B,GAAG,OAAO3B,EAAI4B,GAAGlB,EAAIsB,mBAAmB,IAAG,IAAI,EAChnC,EACIC,EAAkB,G,6FC2CtB,GACAX,KAAA,cACAY,WAAA,CACA,CAAAC,EAAAA,EAAAb,MAAAa,EAAAA,EACA,CAAAC,EAAAA,EAAAd,MAAAc,EAAAA,EACA,CAAAC,EAAAA,EAAAf,MAAAe,EAAAA,EACA,CAAAC,EAAAA,EAAAhB,MAAAgB,EAAAA,GAEAC,IAAAA,GACA,OACA9B,KAAA,GAEA,EACA+B,OAAAA,GACA,EACAC,SAAAA,GAEAC,QAAAC,IAAA,kBACA,KAAAlC,KAAA,GACA,KAAAmC,cACA,EACAC,QAAA,CACAtC,WAAAA,GACA,KAAAuC,QAAAC,MAAA,EACA,EACAH,YAAAA,GACAI,EAAAA,EAAAC,WAAAC,UAAAC,MAAAC,IACAV,QAAAC,IAAAS,GACA,KAAA3C,KAAA4C,QAAAD,EAAA,GAEA,EACAnC,QAAAA,CAAAqC,EAAA3C,GACA+B,QAAAC,IAAAW,GACA,KAAA7C,KAAA8C,OAAA5C,EAAA,GACAqC,EAAAA,EAAAC,WAAAO,OAAAF,EACA,EACAlC,cAAAA,CAAAqC,GACA,KAAAX,QAAAO,KAAA,CAAAK,KAAA,WAAAD,KACA,ICnF+P,I,UCQ3PE,GAAY,OACd,EACA5D,EACAkC,GACA,EACA,KACA,WACA,MAIF,EAAe0B,EAAiB,O","sources":["webpack://jdzj/./src/pages/mine/History.vue","webpack://jdzj/src/pages/mine/History.vue","webpack://jdzj/./src/pages/mine/History.vue?f9b5","webpack://jdzj/./src/pages/mine/History.vue?b9f8"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-nav-bar',{staticClass:\"backBar\",attrs:{\"title\":\"历史记录\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('van-list',{staticClass:\"vod-list\",attrs:{\"finished-text\":\"没有更多了\"}},_vm._l((_vm.vods),function(vod,index){return _c('van-swipe-cell',{key:index,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"删除\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delClick(vod.vodId,index)}}})]},proxy:true}],null,true)},[_c('div',{staticClass:\"vod-class\",on:{\"click\":function($event){return _vm.handleToDetail(vod.vodId)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(vod.cover),expression:\"vod.cover\"}],staticClass:\"fixed-size-image\"}),_c('div',{staticClass:\"vod-info\"},[_c('p',{staticClass:\"name-class\"},[_vm._v(_vm._s(vod.vodName))]),_c('p',{staticClass:\"year-class\"},[_vm._v(_vm._s(vod.year))]),_c('p',{staticClass:\"director-class\"},[_vm._v(_vm._s(vod.director))]),_c('p',{staticClass:\"watch-class\"},[_vm._v(\"观看至-\"+_vm._s(vod.watchTime))])])])])}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n   <div>\n      <van-nav-bar\n        class=\"backBar\"\n        title=\"历史记录\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n      />\n      <van-list\n        class=\"vod-list\"\n        finished-text=\"没有更多了\"\n      >\n        \n        <van-swipe-cell v-for=\"(vod,index) of vods\" :key=\"index\">\n            <div class=\"vod-class\" @click=\"handleToDetail(vod.vodId)\">\n              <img v-lazy=\"vod.cover\" class=\"fixed-size-image\" />\n              <div class=\"vod-info\">\n                <p class=\"name-class\">{{ vod.vodName }}</p>\n                <p class=\"year-class\">{{ vod.year }}</p>\n                <p class=\"director-class\">{{ vod.director }}</p>\n                <p class=\"watch-class\">观看至-{{ vod.watchTime }}</p>\n              </div>\n            </div>\n            <template #right>\n                <van-button \n                  square text=\"删除\" \n                  type=\"danger\" \n                  class=\"delete-button\"\n                  @click=\"delClick(vod.vodId,index)\"\n                  />\n            </template>\n        </van-swipe-cell>\n\n      </van-list>\n   </div>\n</template>\n\n<script>\nimport { NavBar,List,SwipeCell,Button } from 'vant'\nimport 'vant/lib/nav-bar/style'\nimport 'vant/lib/list/style'\nimport 'vant/lib/button/style'\nimport 'vant/lib/swipe-cell/style'\nimport db from 'common/db.js'\n\nexport default {\n  name: 'HistoryPage',\n  components : {\n    [NavBar.name]:NavBar,\n    [List.name]:List,\n    [SwipeCell.name]:SwipeCell,\n    [Button.name]:Button\n  },\n  data () {\n     return {\n        vods:[]\n     }\n  },\n  mounted () {\n  },\n  activated() {\n    // keep-live 当缓存的组件被激活时调用\n    console.log(\"his--activated\")\n    this.vods = []\n    this.queryHistory()\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.back(-1)\n    },\n    queryHistory() {\n      db.vodhistory.toArray().then((list)=>{\n        console.log(list)\n        this.vods.push(...list)\n      })\n    },\n    delClick (vId,index) {\n      console.log(vId)\n      this.vods.splice(index,1)\n      db.vodhistory.delete(vId)\n    },\n    handleToDetail (id) {\n      this.$router.push({ path: `/detail/${id}` })\n    },\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n/deep/.van-nav-bar .van-icon \n  color: #515151\n.backBar   \n  position: fixed\n  top: 0\n  left: 0\n  right: 0\n  z-index: 1\n.vod-list\n  padding-left: .2rem\n  padding-right: .2rem  \n  margin-top: .95rem\n  .vod-class\n    display: flex\n    width 100%\n    height: 2.95rem\n    align-items: center\n    justify-content: flex-start\n    margin-bottom: .18rem\n    .fixed-size-image\n      width: 2.21rem\n      height: 100%\n      object-fit: cover\n    .vod-info\n      display flex\n      flex-direction: column\n      height 100%\n      width 5.29rem\n      margin-left: .18rem\n      .name-class\n        display inline-block\n        margin-top .2rem\n        font-size .3rem\n        line-height .4rem\n        height .4rem\n        font-weight 600\n        color #222222\n        text-overflow ellipsis\n        overflow hidden\n      .year-class\n        display: inline-block\n        margin-top .2rem\n        font-size .25rem\n        color #444444\n      .director-class\n        display: inline-block    \n        margin-top .2rem\n        font-size .25rem\n        color #444444\n      .watch-class  \n        display: inline-block    \n        margin-top .2rem\n        font-size .25rem\n        color #444444\n .delete-button\n   height 100%\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./History.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./History.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./History.vue?vue&type=template&id=1f3acd8c&scoped=true\"\nimport script from \"./History.vue?vue&type=script&lang=js\"\nexport * from \"./History.vue?vue&type=script&lang=js\"\nimport style0 from \"./History.vue?vue&type=style&index=0&id=1f3acd8c&prod&lang=stylus&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f3acd8c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onClickLeft","_l","vods","vod","index","key","scopedSlots","_u","fn","$event","delClick","vodId","proxy","handleToDetail","directives","name","rawName","value","cover","expression","_v","_s","vodName","year","director","watchTime","staticRenderFns","components","NavBar","List","SwipeCell","Button","data","mounted","activated","console","log","queryHistory","methods","$router","back","db","vodhistory","toArray","then","list","push","vId","splice","delete","id","path","component"],"sourceRoot":""}